From 967c7a9bb41ecde9293ccfd672f1b7c491e9a268 Mon Sep 17 00:00:00 2001
From: Bastien Nocera <hadess@hadess.net>
Date: Tue, 8 Feb 2011 23:11:08 +0000
Subject: [PATCH] datetime: Fix gsd_datetime_check_tz_name() never working

Wrong variable passed into g_file_new_for_path()...

https://bugzilla.redhat.com/show_bug.cgi?id=674999
---
 plugins/datetime/gsd-datetime-mechanism.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/plugins/datetime/gsd-datetime-mechanism.c b/plugins/datetime/gsd-datetime-mechanism.c
index 89f1c66..4f34f0b 100644
--- a/plugins/datetime/gsd-datetime-mechanism.c
+++ b/plugins/datetime/gsd-datetime-mechanism.c
@@ -517,7 +517,7 @@ gsd_datetime_check_tz_name (const char *tz,
         tz_path = g_build_filename (SYSTEM_ZONEINFODIR, tz, NULL);
 
         /* Get the actual resolved path */
-        file = g_file_new_for_path (tz);
+        file = g_file_new_for_path (tz_path);
         actual_path = g_file_get_path (file);
         g_object_unref (file);
 
-- 
1.7.4

